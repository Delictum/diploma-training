unit Unit5;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls, Data.FMTBcd, DBXMySQL,
  Vcl.StdCtrls, Vcl.DBCtrls, Data.DB, Data.SqlExpr, Datasnap.Provider,
  Datasnap.DBClient;

type
  TFormBegin = class(TForm)
    DataSource1: TDataSource;
    ClientDataSet1: TClientDataSet;
    DataSetProvider1: TDataSetProvider;
    SQLQuery1: TSQLQuery;
    SQLConnection1: TSQLConnection;
    Label1: TLabel;
    Ok: TButton;
    DBLCBLevel: TDBLookupComboBox;
    DataSource2: TDataSource;
    ClientDataSet2: TClientDataSet;
    DataSetProvider2: TDataSetProvider;
    SQLQuery2: TSQLQuery;
    SQLConnection2: TSQLConnection;
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure OkClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FormBegin: TFormBegin;
  Otvet, GameStepID : integer;

implementation

{$R *.dfm}

uses Unit3, Unit6, Unit7, Unit8;

procedure TFormBegin.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  LogOut.Close;
end;

procedure TFormBegin.OkClick(Sender: TObject);
begin
if DBLCBLevel.Text <> '' then
    begin
      if DBLCBLevel.Text = 'Литература' then
        begin
          FormGame1.PageControl1.ActivePageIndex := 0;
          GameStepID := 1;
          FormBegin.Hide;
          FormGame1.Show;
        end;
      if DBLCBLevel.Text = 'IT-технологии' then
        begin
          GameStepID := 11;
          FormGame2.PageControl1.ActivePageIndex := 0;
          FormBegin.Hide;
          FormGame2.Show;
        end;
      if DBLCBLevel.Text = 'История' then
        begin
          GameStepID := 21;
          FormGame3.PageControl1.ActivePageIndex := 0;
          FormBegin.Hide;
          FormGame3.Show;
        end;
      ClientDataSet1.Active := false;
      SQLQuery1.Close;
      SQLQuery1.SQL.Clear;
      SQLQuery1.SQL.Add('SELECT *  FROM Answers WHERE AnswersQuestionsID = ' + IntToStr(GameStepID));
      SQLQuery1.Open;
      ClientDataSet1.Active := true;

      ClientDataSet2.Active := false;
      SQLQuery2.Close;
      SQLQuery2.SQL.Clear;
      SQLQuery2.SQL.Add('SELECT *  FROM Questions WHERE QuestionsID = ' + IntToStr(GameStepID));
      SQLQuery2.Open;
      ClientDataSet2.Active := true;
    end
  else
    ShowMessage('Выберите вопросы.');
end;

end.
